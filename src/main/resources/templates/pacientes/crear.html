<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de registro de paciente</title>


    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        form {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
            text-align: left;
        }

        h2 {
            color: #007bff;
            text-align: center;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }

        button {
            background-color: #007bff;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }
    </style>

</head>
<body>
<form th:action="@{/pacientes/crear}" method="post"  onsubmit="return validarFormulario()">
    <h2>Registro de paciente</h2>

    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" minlength="5" placeholder="Ingrese Nombre" required oninput="validarYLimpiarCampoNombre(this)">

    <label for="dni">DNI:</label>
    <input type="text" id="dni" th:value="${dni}" min="30000000" max="60000000" minlength="8" maxlength="8" placeholder="Ingrese DNI"  name="dni"required />

    <label for="domicilio">Domicilio:</label>
   <input type="text" id="domicilio" name="domicilio" placeholder="Ingrese Domicilio" minlength="10" required oninput="validarYLimpiarCampoDomicilio(this)">

    <label for="fechaNacimiento">Fecha de Nacimiento:</label>
    <input type="Date" id="fechaNacimiento" name="fechaNacimiento" min="1900-01-01" required>

    <label for="estadoCivil">Estado Civil:</label>
    <input type="text" id="estadoCivil" name="estadoCivil" minlength="4"  placeholder="Ingrese Estado Civil" required oninput="validarYLimpiarCampoNombre(this)">

    <label for="telefonoFijo">Teléfono Fijo:</label>
    <input type="number" id="telefonoFijo" name="telefonoFijo" placeholder="Ej : 4212121" minlength="7" maxlength="7"  required oninput="validarYLimpiarTelefono(this)">

    <label for="telefonoCelular">Teléfono Celular:</label>
    <input type="number" id="telefonoCelular" name="telefonoCelular" placeholder="EJ: 3456110645"  minlength="10" maxlength="10" required oninput="validarYLimpiarTelefono(this)">

    <label for="email">Email:</label>
    <input type="email" id="email" name="email"  minlength="15" placeholder="Ej : correoFalso@gmail.com"  required oninput="validarYLimpiarEmail(this)">

    <button type="submit">Crear Paciente</button>
</form>
<script>
    document.getElementById('fechaNacimiento').max = new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000).toISOString().split("T")[0];
   

   function validarFormulario() {
    const nombre = document.getElementById('nombre').value;
    if (!/^[a-zA-Z\s]*$/.test(nombre)) {
        alert('El campo "Nombre" solo debe contener letras.');
        return false;
    }
    const domicilio = document.getElementById('domicilio').value;
    if (!/^[a-zA-Z0-9\s]*$/.test(domicilio)) {
        alert('El campo "Domicilio" debe contener letras y números.');
        return false;
    }
    const estadoCivil = document.getElementById('estadoCivil').value;
    if (!/^[a-zA-Z\s]*$/.test(estadoCivil)) {
        alert('El campo "Estado Civil" solo debe contener letras.');
        return false;
    }
    
    
        // Verificando el dni
    if(!(formulario.dni.value.split("").length == 8) || parseInt(formulario.dni.value) < 30000000 || parseInt(formulario.dni.value) > 60000000){
      alert("Dni incorrecto, Tiene que estar entre 30000 y 60000")
      return false;    
    }
    // Verificando email
    if(formulario.email.value.split("@")[1] != "gmail.com"){
      alert("correo electronico mal")
      return false;
    }
          
    return true;
}

function validarYLimpiarCampoNombre(input) {
    const valor = input.value;
    if (!/^[a-zA-Z\s]*$/.test(valor)) {
        alert('El campo "Nombre" solo debe contener letras.');
        input.value = valor.replace(/[^a-zA-Z\s]/g, '');
    }
}

function validarYLimpiarCampoDomicilio(input) {
    const valor = input.value;
    if (!/^[a-zA-Z0-9\s]*$/.test(valor)) {
        alert('El campo "Domicilio" debe contener letras y números.');
        input.value = valor.replace(/[^a-zA-Z0-9\s]/g, '');
    }
    
}
function validarYLimpiarTelefono(input) {
    const valor = input.value;
    if (!/^[0-9\-]*$/.test(valor)) {
        alert('El campo de teléfono solo debe contener números y guiones.');
        input.value = valor.replace(/[^0-9\-]/g, '');
    }
}





</script>

</body>
</html>
